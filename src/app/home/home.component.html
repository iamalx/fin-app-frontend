<!--
  ~ Copyright (c) 2016 VMware, Inc. All Rights Reserved.
  ~ This software is released under MIT license.
  ~ The full license information can be found in LICENSE in the root directory of this project.
  -->

<div class='fav-side'>
  <app-favorites></app-favorites>
</div>
  
  <div class='search1'>
      <nav class="subnav options1">
          <ul class="nav nav-wrapper">
              <li class="nav-item">
                  <a (click)='getIntraDayData(stockName.value)' [class.active]="isButtonActive == 'intraDay'" class="nav-link nav-buttom" >Hourly</a>
              </li>
              <li class="nav-item">
                  <a (click)='getDailyyData(stockName.value)' [class.active]="isButtonActive == 'daily'" class="nav-link nav-buttom">Daily</a>
              </li>
              <li class="nav-item">
                  <a (click)='getWeeklyData(stockName.value)' [class.active]="isButtonActive == 'weekly'" class="nav-link nav-buttom">Weekly</a>
              </li>
              <li class="nav-item">
                  <a (click)='getMonthlyData(stockName.value)' [class.active]="isButtonActive == 'monthly'" class="nav-link nav-buttom">Monthly</a>
              </li>
          </ul>
      </nav>

    <input id='searchBox' class="..search" type="text" placeholder='  Enter stock symbol...' name="stockName" #stockName (keyup.enter)="onApi(stockName.value)">
    <button id='submitButton' class='btn btn-primary' name='submitName' (click)='onApi(stockName.value)' >
      Search
    </button>
  </div>

  <div class='wrapper card'>
    
    <div class="row" *ngIf='finalLineChartArray.length > 0 '>
      <div class="table1" style="margin-bottom: 10px">
        <table class="dates1 table table-responsive table-condensed">
          <tr>
            <th *ngFor="let label of lineChartLabels">{{label}}</th>
          </tr>
          <tr *ngFor="let d of lineChartData">
            <td *ngFor="let label of lineChartLabels; let j=index">{{d && d.data[j]}}</td>
          </tr>
        </table>
      </div>
      <div class=" chart1">
        <div>
          <canvas baseChart  width="1090%" height="500%" id='canvas' 
          [data]="data"
          [datasets]="lineChartData" 
          [labels]="lineChartLabels" 
          [colors]="lineChartColors"
          [options]="lineChartOptions" 
          [legend]="lineChartLegend" 
          [chartType]="lineChartType"
          (chartHover)="chartHovered($event)"
          (chartClick)="chartClicked($event)"></canvas>
        </div>
      </div>
    </div>
    
  </div>

  <div class= 'main-side'>
      
    <div class="row ">
      <div class="col-lg-5 col-md-8 col-sm-12">
        <div class="card">
          <div class="card-header">
          Most Current Data: {{ _apiService.stockSymbol || uppercase}}
          </div>
          <div class="card-block">
            <div class="card-title">
              <ol>
                <li>Open: {{sideStockData.open}}
                <li>Close: {{sideStockData.close}}
                <li>High: {{sideStockData.high}}
                <li>Low: {{sideStockData.low}}
              </ol>
            </div>
            <div class="card-text">
              {{sideStockData.date}}
            </div>
          </div>
          <div *ngIf='sideStockData.open || sideStockData.high' class="card-footer">
            <button class="btn btn-sm btn-link">see more data</button>
            <button class="btn btn-sm btn-link">discover similar stocks</button>
          </div>
        </div>
      </div>
    </div>
  
    <div class="row">
      <div class="col-lg-5 col-md-8 col-sm-12 col-xs-1">
        <div class="card"  *ngIf='sideStockData.open || sideStockData.high'>
          <div class="card-header">
            Market News 
          </div>
          <div class="card-block" >
              <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner"  >
                  <div class="carousel-item active" *ngIf="newsArray[0]">
                    <div class="card-title">
                      {{newsArray[0].title}}
                    </div>
                      <div class="card-text">
                        {{newsArray[0].summary ? newsArray[0].summary: null}}
                      <a href={{newsArray[0].url}}>Read more...</a>
                    </div>
                  </div>
                  <div class="carousel-item" *ngIf="newsArray[1]">
                    <div class="card-title">
                      {{newsArray[1].title}}
                    </div>
                    <div class="card-text">
                      {{newsArray[1].summary ? newsArray[1].summary: null}}
                      <a href={{newsArray[1].url}}>Read more...</a>
                    </div>
                  </div>
                  <div class="carousel-item" *ngIf="newsArray[2]">
                    <div class="card-title">
                      {{newsArray[2].title ? newsArray[2].title: null}}
                    </div>
                    <div class="card-text">
                      {{newsArray[2].summary}}
                      <a href={{newsArray[2].url}}>Read more...</a>
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-sm btn-link">find similar articles</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  
